<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Challenge Widget</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: linear-gradient(to top, #ffbf9c, #ffc074);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .personal-chl-container-outer {
    display: flex;
    max-width: 550px;
    height: 220px;
  }

  .chl-tabs-container {
    position: relative;
    width: 24px;
  }

  .chl-tab-btn {
    position: absolute;
    width: 24px;
    height: 60px;
    border: none;
    border-radius: 20px 0 0 20px;
    cursor: pointer;
    transition: top 0.4s ease, transform 0.3s ease, filter 0.3s ease;
    left: 0;
  }

  .chl-tab-btn.math { background: linear-gradient(180deg, #3288AC, #286D8A); }
  .chl-tab-btn.text { background: linear-gradient(180deg, #40c9a9, #32ac93); }
  .chl-tab-btn.grammar { background: linear-gradient(180deg, #A0C58F, #8BB574); }

  .chl-tab-btn:hover { filter: brightness(1.2); }
  .chl-tab-btn.active { 
    filter: brightness(1.3);
}

  /* Main container */
  .personal-chl-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    border-radius: 0 20px 20px 20px;
    padding: 16px;
    overflow: hidden;
  }

  .chl-header { display: flex; justify-content: flex-start; margin-bottom: 12px; }
  .chl-title { font-size: 0.95rem; font-weight: 700; color: rgba(0,0,0,0.8); text-transform: uppercase; letter-spacing: 0.05em; }

  .chl-display-area { flex: 1; position: relative; display: flex; flex-direction: column; }
  .chl-category-content { flex: 1; display: none; flex-direction: column; opacity: 0; transition: opacity 0.3s ease; }
  .chl-category-content.active { display: flex; opacity: 1; }

  .chl-info-text { flex: 1; font-size: 0.85rem; color: rgba(0,0,0,0.75); line-height: 1.5; margin-bottom: 10px; }
  .chl-action-btn { padding: 9px 16px; border: none; background: linear-gradient(135deg, #3288AC, #286D8A); color: white; font-size: 0.85rem; font-weight: 700; border-radius: 10px; cursor: pointer; align-self: flex-end; text-transform: uppercase; transition: all 0.3s ease; }
  .chl-action-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(50,136,172,0.3); }
</style>
</head>
<body>

<div class="personal-chl-container-outer">
  <div class="chl-tabs-container" id="chlTabsContainer"></div>
  <div class="personal-chl-container">
    <div class="chl-header">
      <div class="chl-title" id="chlTitle">Title</div>
    </div>
    <div id="chlDisplayArea"></div>
  </div>
</div>

<script>
const challenges = [
  { id:'math', title:'Matematika', info:'Daugybą • Vienaženklių skaičių iki 10 • Neperžengiant dešimties • Skaitinė lygybė • Eilute' },
  { id:'text', title:'Teksto Supratimas', info:'Turinio komponavimą • Lengvas • Atsakykite į klausimus apie tekstą iš atmintinės' },
  { id:'grammar', title:'Gramatika', info:'Žodžio pabaiga: Daiktavardis • Įsidėmėtina rašyba • Panašiai skambančios priebalsės • Balsės ir dvibalsės' }
];

const tabsContainer = document.getElementById('chlTabsContainer');
const displayArea = document.getElementById('chlDisplayArea');
const chlTitle = document.getElementById('chlTitle');

const tabHeight = 60;
const overlap = 20;
let tabs = [];

// Initialize tabs and content
challenges.forEach((ch,index)=>{
  const btn = document.createElement('button');
  btn.className=`chl-tab-btn ${ch.id} ${index===0?'active':''}`;
  btn.dataset.id = ch.id;
  tabsContainer.appendChild(btn);
  tabs.push(btn);

  btn.addEventListener('click',()=> switchChallenge(ch.id));

  const content = document.createElement('div');
  content.className=`chl-category-content ${index===0?'active':''}`;
  content.innerHTML=`
    <div class="chl-info-text">${ch.info}</div>
    <button class="chl-action-btn" onclick="startChallenge('${ch.title}')">Atlikti</button>
  `;
  displayArea.appendChild(content);
});

// Position tabs with partial overlap and correct z-index
function updateTabPositions(){
  tabs.forEach((tab,i)=>{
    tab.style.top = `${i*(tabHeight-overlap)}px`;
    tab.style.zIndex = tabs.length - i;
  });
}

// Switch tab by id
function switchChallenge(chId){
  const clickedIndex = tabs.findIndex(tab => tab.dataset.id === chId);
  if(clickedIndex === -1) return;

  const clickedTab = tabs[clickedIndex];
  tabs.splice(clickedIndex,1);
  tabs.unshift(clickedTab);

  // Update active classes
  tabs.forEach((tab,i)=>tab.classList.toggle('active', i===0));
  document.querySelectorAll('.chl-category-content').forEach((content,i)=>content.classList.toggle('active', challenges[i].id===chId));

  // Update title dynamically
  const activeChallenge = challenges.find(c=>c.id===chId);
  chlTitle.textContent = activeChallenge.title;

  updateTabPositions();
}

// Initial layout
updateTabPositions();
chlTitle.textContent = challenges[0].title;

function startChallenge(title){
  alert(`Starting challenge: ${title}`);
}
</script>

</body>
</html>
