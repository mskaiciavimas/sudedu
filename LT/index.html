<!DOCTYPE html>
<html>

<head>
	<title>SUDEDU LT</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="sudEdu skirtas priešmokyklinio ugdymo, pradinių bei aukštesnių klasių mokinių aritmetinių veiksmų (sudėties, atimties, daugybos, dalybos) mintinio skaičiavimo, teksto supratimo bei rašymo gebėjimų gilinimui. Skaičiavimas mintinai ne tik lavina atmintį, bet ir lengvina bei spartina matematikos mokymąsi. Skaitymo supratimas šiandien itin svarbus, nes jis suteikia galimybę atsirinkti ir kritiškai vertinti gausią informaciją, padeda orientuotis informacijos sraute bei išskirti patikimus šaltinius, kad galėtume priimti pagrįstus sprendimus."> 
	<meta name="keywords" content="mintinis skaičiavimas, mintinas skaičiavimas, skaičiavimas mintinai, matematika, pradinukai, priešmokyklinis ugdymas, priešmokyklinukai, pradinis ugdymas, atminties lavinimas, skaitinė lygybė, skaitinė lygybė su nežinomuoju, sudėtis, dėmuo, atimtis, turinys, atėminys, daugyba, dauginamasis, daugiklis, dalyba, dalinis, daliklis, daugybos lentelė, lentelinė sudėtis, lentelinė atimtis, sudėtis iki 10, sudėtis iki 20, sudėtis iki 100, sudėtis iki 1000, atimtis iki 10, atimtis iki 20, atimtis iki 100, atimtis iki 1000, vienaženkliai skaičiai, dviženkliai skaičiai, triženkliai skaičiai, keturženkliai skaičiai, peržengiant dešimtį, peržengiant šimtą, peržengiant tūkstančių vienetus, išardant dešimtį, išardant šimtą, išardant tūkstančių vienetus, pergrupuojant dešimtis, pergrupuojant šimtus, peržengiant tūkstančių vienetus, skaitymas, teksto supratimas, skaitymo supratimas, rašymas, struktūros išdėstymas, turinio komponavimas, įsidėmėtina rašyba, raidė, raidės, balsė, balsės, dvibalsė, dvibalsės, priebalsė, priebalsės, panašiai skambančios priebalsės, mišrusis dvigarsis, mišrieji dvigarsiai, priešdėlis, priešdėliai, priesaga, priesagos, galūnė, žodžio galūnė, žodžio pabaiga, daiktavardis, būdvardis, prieveiksmis, veiksmažodis, daiktavardžiai, būdvardžiai, prieveiksmiai, veiksmažodžiai">
	
	<link rel="canonical" href="https://www.sudedu.lt/LT/">
	<link rel="alternate" href="https://www.sudedu.lt/LT/" hreflang="lt">
	<link rel="alternate" href="https://www.sudedu.lt/EN/" hreflang="en">
	<link rel="icon" href="../images/favicon.ico" type="image/x-icon">
	<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" type="text/css" href="../index.css">
    <link rel="stylesheet" href="../main-nav-bar.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-96Q83PW8XY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-96Q83PW8XY');
</script>	
<script src="../refresh-token.js"></script>

<style>
	* {
		-webkit-user-select: none;
		-webkit-tap-highlight-color: transparent;
		user-select: none;
        box-sizing: border-box;
	}

	html {
		display: flex;
		justify-content: center;
		align-items: center;
		background-image: linear-gradient(to top, #ffbf9c, #ffbf92, #ffbf89, #ffbf7e, #ffc074);
		width: 100vw;
		height: 100svh;
		overflow: hidden;
		user-select: none;         /* Standard */
		-webkit-user-select: none; /* Chrome, Safari, Edge */
		-moz-user-select: none;    /* Firefox */
		-ms-user-select: none;     /* IE/older Edge */
	}

	body {
		margin: 0;
		font-family: 'SFpro', sans-serif;
		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		height: 100%;
		overflow: hidden;
	}

	.container {
		position: relative;
		height: calc(100% - 80px - 16px - 16px);
		max-height: calc(100% - 80px - 16px - 16px);
		min-height: calc(100% - 80px - 16px - 16px);
		width: calc(100% - 16px - 16px);
		display: flex;
		background: rgba(255, 255, 255, 0.08);
		margin: 16px;
		border-radius: 20px;
		border: 1px solid rgba(255, 255, 255, 0.1);
		box-shadow: 0 8px 40px rgba(0, 0, 0, 0.1);
	}

    .hidden {
        display: none;
    }

.container-inner {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  box-sizing: border-box; /* include padding in height calculations */
  padding: 25px;
  overflow: hidden; /* clip any overflow inside container */
}

.container-inner.wrapped {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  box-sizing: border-box; /* include padding in height calculations */
  padding: 0px 25px;
  overflow: hidden; /* clip any overflow inside container */
}

.practice-label-div,
.submit-button-div {
  display: flex;
  align-items: center;
  justify-content: center;
   max-width: 500px;
   width: 100%;
}

.practice-label::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 4px;
    background: linear-gradient(90deg, #3288AC, #40c9a9);
    border-radius: 2px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { width: 60px; opacity: 1; }
    50% { width: 80px; opacity: 0.7; }
}

.submit-button-div {
  padding: 16px 0 0 0;
  gap: 5px
}

.practice-outer-div {
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 20px;
    border-radius: 25px;
    justify-content: start;
    align-items: center;
}

.divider {
    display: flex;
    align-items: center;
    text-align: center;
    margin: 24px 0;
    color: #7f8c8d;
    font-size: 0.9rem;
}

/* TEMPORARY STUFF START*/
.temp-login-btn {
    width: 100%;
    padding: 14px 24px;
    font-size: 1.2rem;
    font-weight: 600;
    font-family: 'SFpro', sans-serif;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, #40c9a9, #32ac93);
    color: white;
}

.temp-login-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0) 100%);
    border-radius: 20px;
    pointer-events: none;
    transition: background 0.3s ease;
}

.temp-login-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 20px;
    padding: 1px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
}

.divider::before,
.divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid #dee2e6;
}

.divider span {
    padding: 0 16px;
}
/* TEMPORARY STUFF END */

.personal-chl {
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
    justify-content: end;
}

.practice-outer-div,
.personal-chl {
    flex: 1 1 400px;
}

.middle-div.wrapped {
    overflow: auto;
    padding: 20px 0;
    gap: 15px;
}

.middle-div.wrapped .practice-outer-div,
.middle-div.wrapped .personal-chl {
    max-width: 100%;
    flex: none;
    width: 100%;
}

.middle-div.wrapped .personal-chl {
    height: auto;
}

.middle-div.wrapped .practice-outer-div.overflowing {
    height: 100%;
}

.middle-div.wrapped .practice-outer-div {
    max-height: 92.5%;
}

.personal-chl-inner {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 20px;
    border-radius: 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.middle-div {
  height: 100%;
  display: flex;
  flex-direction: row;
  flex: 1 1 auto;   /* take remaining space */
  min-height: 0;    /* allow shrinking */
  min-width: 0;     /* allow horizontal shrink if needed */
  align-items: start;
  justify-content: center;
  gap: 25px;
  flex-wrap: wrap;
}

.new-task-outer-div {
    display: flex;
    align-items: start;
    justify-content: center;
    overflow: hidden;
    width: 100%;
}

#new-task-options-container {
    max-height: 100%;
    justify-content: start;
    overflow: hidden;
    position: relative;
}

#new-task-options-container-inner {
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-gutter: stable;
    padding: 15px 3px 15px 15px;
    position: relative;
    height: 100%;
    -webkit-overflow-scrolling: touch;
    -webkit-overflow-scrolling: touch !important;
}

#mode_choice {
    margin-top: 0;
}

	.practice-label {
        font-size: 2rem;
        font-weight: 700;
        opacity: 0.9;
        margin-bottom: 16px;
        position: relative;
	}

	.lm-animated-bg {
		position: absolute;
		width: 100vw;
		height: auto;
		top: -18px;
		left: -18px;
		right: -18px;
		bottom: -18px;
		background-image: url(../images/main_bg.png);
		background-position: center center;
		background-size: cover;
		background-repeat: no-repeat;
		z-index: -1;
		opacity: 1;
	}


.submit-button-outer {
    display: flex;
    flex: 1 1 auto;
}   

.earnings-estimation-outer {
    display: flex;
    justify-content: end;
    flex: 1 1 auto;
}

.submit-button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  border: none;
  /*border: #286D8A 1px solid;*/
  background: linear-gradient(135deg, #3288AC, #286D8A);
  border-radius: 25px;
  cursor: pointer;
  font-size: 1rem;
  color: #F5F5F7;
  overflow: hidden;
  min-width: 0;
  padding: 12px 10px;
  font-weight: 600;
  letter-spacing: 0.01em;
  font-size: 1.15rem;
  width: 150px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-transform: uppercase;
  letter-spacing: 0.05rem;
  /*box-shadow: 
        0 1px 2px rgba(0, 0, 0, 0.2),
        0 4px 12px rgba(50, 136, 172, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);*/
}

.submit-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0) 100%);
  border-radius: 20px;
  pointer-events: none;
  transition: background 0.3s ease;
}

.submit-button::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 20px;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

.submit-button:hover::before {
  background: rgba(255, 255, 255, 0.15);
}


	/* POPUP STYLES START */
.class-popup-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 10000;
    justify-content: center;
    align-items: center;
}

.class-popup-content {
    background-color: #fff;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
    width: 90%;
    max-width: 500px;
    text-align: center;
    position: relative;
}

.class-popup-title {
    font-size: 24px;
    margin-bottom: 20px;
    color: #2c3e50;
    font-weight: bold;
}

.class-options {
    width: 100%;
    height: 51px;
    padding: 0 24px;
    font-size: 1.2rem;
    font-weight: 600;
    font-family: 'SFpro', sans-serif;
    border: none;
    border-radius: 25px;
    font-family: 'SFpro', sans-serif;
    background-color: #f8f9fa;
    border: 2px solid #dee2e6;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    text-align: center;
}

.class-options:active,
.class-options:focus {
    outline: none;
}

.class-popup-note {
    font-size: 14px;
    color: #6c757d;
    margin-top: 15px;
}

/* Make the popup modal visible when needed */
.class-popup-modal.active {
    display: flex;
}

/* Prevent scrolling when popup is active */
body.popup-active {
    overflow: hidden;
}

.class-popup-button {
    padding: 12px 25px;
    background-color: #40c9a9;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    font-size: 16px;
    transition: all 0.3s ease;
    margin-top: 20px;
}

.class-popup-button:disabled {
    background-color: #adb5bd;
    cursor: not-allowed;
    transform: none;
}

.message-board-outer {
    width: 100%;
    height: 100%;
}

        .message-board-personal-chl-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 25px;
            flex-wrap: wrap;
            min-width: 0;
            flex: 1 1 400px;
        }

        .container-inner.wrapped .message-board-personal-chl-container {
            height: auto;
            width: 100%;
            gap: 15px;
        }

        .container-inner.wrapped .message-board {
            min-height: 250px;
        }

        .message-board-container {
            flex: 1;
        }

        .message-board-container {
            display: flex;
            flex-direction: column;
            flex: 1 1 auto;
            min-height: 0;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 20px;
        }

        .board-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            flex-shrink: 0;
            padding: 0 5px;
        }

        .board-title,
        .personal-chl-label {
            font-size: 1.15rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: rgba(0, 0, 0, 0.7);
        }

        .board-date {
            font-size: 0.85rem;
            color: rgba(0, 0, 0, 0.5);
            font-weight: 600;
        }

        .message-board {
            flex: 1 1 0px;
            min-height: 0;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 14px;
            height: 100%;
        }

        .message-board > :first-child {
            padding-top: 0;
        }

        .message-board > :last-child {
            padding-bottom: 0;
            border-bottom: none;
        }

        .board-message {
            font-size: 0.95rem;
            color: rgba(0, 0, 0, 0.75);
            line-height: 1.6;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 8px;
            padding: 8px;
        }

        .board-message:hover {
            background: rgba(255, 255, 255, 0.2);
            color: rgba(0, 0, 0, 0.85);
        }

        .board-message:last-child {
            margin-bottom: 0;
        }

        .message-text {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .message-meta {
            font-size: 0.7rem;
            color: rgba(0, 0, 0, 0.5);
            margin-top: 4px;
            font-style: italic;
        }

        .empty-message {
            text-align: center;
            color: rgba(0, 0, 0, 0.5);
            font-size: 0.8rem;
            padding: 20px 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .personal-chl-content-holder {
            width: 100%;
        }

        .personal-chl-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    flex: 0 1 auto;
    padding: 20px;
}

.chl-header {
    align-items: center;
    margin-bottom: 16px;
    display: flex; 
    justify-content: flex-start; 
    margin-bottom: 12px; 
    font-size: 1.25rem;
    font-weight: 800;
    text-transform: uppercase;
}

.chl-title {
    font-size: 1.15rem;
    font-weight: 800;
    text-transform: uppercase;
}

.chl-info-text-inner {
    font-size: 0.9rem;
    line-height: 1.5;
    position: relative;
}

.chl-title-math {
    color: #286D8A;
}

.chl-title-text-comp {
    color: #32ac93;
}

.chl-title-grammar {
    color: #F28C28;
}

.practice-label::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 4px;
    background: linear-gradient(90deg, #3288AC, #40c9a9);
    border-radius: 2px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { width: 60px; opacity: 1; }
    50% { width: 80px; opacity: 0.7; }
}

.personal-chl-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    flex: 0 1 auto;
    padding: 20px;
}

.chl-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
    gap: 12px;
}

.personal-chl-label {
    font-size: 1.15rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgba(0, 0, 0, 0.7);
    flex-shrink: 0;
}

.chl-indicators {
    display: flex;
    gap: 6px;
    flex: 1;
    justify-content: center;
    align-items: center;
}

.chl-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    transition: all 0.3s ease;
    cursor: pointer;
}

.chl-indicator.math {
    background: linear-gradient(135deg, #3288AC, #286D8A);
}

.chl-indicator.text-comp {
    background: linear-gradient(135deg, #40c9a9, #32ac93);
}

.chl-indicator.grammar {
    background: linear-gradient(135deg, #FFAC1C, #F28C28);
}

.chl-indicator.active {
    width: 24px;
    border-radius: 25px;
}

.chl-nav-arrows {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
}

.chl-nav-btn {
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.chl-nav-btn:active,
.chl-nav-btn:focus {
    background: transparent;
    border: none;
    outline: none;
}

.chl-nav-btn svg {
    width: 16px;
    height: 16px;
    opacity: 0.7;
}

.personal-chl-container-outer {
    position: relative;
    height: 165px;
}

.personal-chl-container-inner {
    position: relative;
    height: 100%;
}

.chl-category-content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    display: flex;
    flex-direction: column;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 20px;
    border-radius: 15px;
}

.chl-category-content.active {
    opacity: 1;
    pointer-events: all;
}

.chl-info-holder {
    height: 100%;
    min-height: 0;
    flex: 1;
    margin: 10px 0;
    position: relative;
}

.chl-info-text {
    height: 100%;
    min-height: 0;
    flex: 1;
    overflow-y: auto;
}

.complete-button-div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

.chl-action-btn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  border: none;
  /*border: #286D8A 1px solid;*/
  background: linear-gradient(135deg, #3288AC, #286D8A);
  border-radius: 25px;
  cursor: pointer;
  color: #F5F5F7;
  overflow: hidden;
  min-width: 0;
  padding: 9px 16px; 
  font-size: 0.85rem; 
  font-weight: 700; 
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-transform: uppercase;
  letter-spacing: 0.05rem;
  /*box-shadow: 
        0 1px 2px rgba(0, 0, 0, 0.2),
        0 4px 12px rgba(50, 136, 172, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);*/
}

.chl-action-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0) 100%);
  border-radius: 20px;
  pointer-events: none;
  transition: background 0.3s ease;
}

.chl-action-btn::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 20px;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

.chl-action-btn:hover::before {
  background: rgba(255, 255, 255, 0.15);
}


@media (min-device-width: 768px) and (max-device-width: 1200px) and (orientation: portrait) {
    .container {
        height: calc(100% - 100px - 16px - 16px);
        max-height: calc(100% - 100px - 16px - 16px);
        min-height: calc(100% - 100px - 16px - 16px);
        background-color: transparent;
        border: none;
        padding: 0;
        box-shadow: none;
    }

    .personal-chl-container-outer {
        height: 170px;
    }

    .personal-chl-container {
        flex: 1 1 auto;
    }

    .chl-header {
        font-size: 1.75rem;
    }

    .chl-info-text-inner {
        font-size: 1.25rem;
    }

    .chl-action-btn {
        font-size: 1.25rem;
    }

    .container-inner {
        padding: 0 !important;
    }

    .middle-div {
        padding: 0 !important;
    }

    .practice-label {
        font-size: 2.5rem;
    }

    #group_name, #mode_choice, #mode_choice_1, #mode_choice_2, #mode_choice_3, #mode_choice_4, #mode_choice_5, #mode_choice_6, #mode_choice_7, #mode_choice_8, #mode_choice_9, #mode_choice_10, #mode_choice_13, #mode_choice_14, #class_choice {
        font-size: 1.5rem;
    }

    .submit-button {
        font-size: 1.4rem;
        padding: 16px 18px;
    }

    #personalChlContainer {
        padding: 15px 0;
    }
    
    .chl-pill {
        font-size: 1.15rem;
    }

    .chl-title {
        font-size: 1.5rem;
    }

    .earnings-iki-holder,
    .coin-amount {
        font-size: 1.35rem;
    }

    .coin-icon img {
        width: 36px;
        height: 36px;
    }

    .chl-info {
        font-size: 1.15rem;
    }

    .personal-chl-label,
    .board-title {
        font-size: 1.5rem;
    }

    .board-date {
        font-size: 1rem;
    }

    .submit-button {
        font-size: 1.35rem;
    }

    .board-message {
        font-size: 1.25rem;
    }

    .chl-action-button {
        font-size: 1.25rem;
    }

    .middle-div.wrapped .chl-action-button {
        width: 120px;
    }

    .message-meta {
        font-size: 0.9rem;
    }

    .chl-indicator {
        height: 12px;
        width: 12px;
    }

    .chl-indicator.active {
        width: 28px;
        border-radius: 25px;
    }

    .chl-nav-btn svg {
        width: 24px;
        height: 24px;
    }
}

@media (max-width: 767px) {
	.container {
		width: 100%;
		max-height: calc(100% - 80px);
		min-height: calc(100% - 80px);
		margin: 0;
		background: transparent;
		border: none;
		border-radius: 0;
		padding: 0;
	}

	.container-inner {
		padding: 15px;
	}

    .practice-outer-div {
        width: 70%;
        min-width: 0;
    }

     .message-board-container {
            padding: 15px;
        }

        .board-title {
            font-size: 1.15rem;
        }

        .message-board {
            padding: 12px;
            min-height: 70px;
            max-height: 110px;
        }

    .practice-label {
        font-size: 1.5rem;
    }

    .chl-pill {
        padding: 11px 6px;
        font-size: 0.75rem;
    }

    .chl-content-container {
        height: 220px;
        padding: 18px;
    }

    .chl-content {
        top: 18px;
        left: 18px;
        right: 18px;
        bottom: 18px;
    }

    .chl-title {
        font-size: 1.05rem;
    }

    .container-inner.wrapped {
        padding: 0;
    }

    .middle-div.wrapped {
        padding: 15px;
    }
}

@media (hover: none) and (pointer: coarse) {
    #personalChlContainer {
        padding: 15px;
    }

    #new-task-options-container-inner {
        padding: 15px;
    }
}


@media (max-width: 575px) {
	.container {
		padding: 0;
	}

    .practice-outer-div {
        width: 100%;
        padding: 15px;
        max-height: 90%;
    }

    .practice-label {
        font-size: 1.75rem;
    }

    #new-task-options-container-inner {
        overflow-y: auto;
        scrollbar-gutter: stable;
        padding: 10px 0;
    }

    #personalChlContainer {
        padding: 10px 0;
    }

    .personal-chl-container {
        padding: 15px;
    }

    .personal-chl-content-holder {
        max-width: 100%;
    }

    .container-inner.wrapped {
        padding: 0;
    }

    .middle-div.wrapped {
        padding: 15px;
    }

    .personal-chl-container-outer {
        height: 170px;
    }
    
    .chl-category-content {
        padding: 15px;
    }
}

/* POPUP STYLES END */
</style>
</head>

<body>
	<div id="customConfirmModal" class="modal">
    <div class="modal-content">
        <p id="customModalText"></p>
        <div class="modal-buttons">
        <button id="customConfirmYes" class="btn btn-confirm">Taip</button>
        <button id="customConfirmNo" class="btn btn-cancel">Ne</button>
        </div>
    </div>
    </div>

    <div id="object-popup" class="object-popup-overlay" style="display:none;">
    <div class="object-popup-panel">
        <button class="object-popup-close">&times;</button>
        <div class="title-subtitle-inline-button-wrapper">
        <div class="object-popup-title-subtitle-wrapper">
        <div class="object-popup-title" id="object-popup-title"></div>
        <div class="object-popup-subtitle" id="object-popup-subtitle"></div>
        </div>
        </div>
        <div class="object-popup-content" id="object-popup-content">
        <!-- Dynamic content goes here -->
        </div>
    </div>
    </div>

     <nav class="main-navbar" id="mainNavbar">
        <div class="main-nav-container">
            <!-- Logo -->
            <a href="#" class="main-nav-logo">
                <div class="main-nav-logo-icon">
                 <img id="sudedu-main-nav-bar-logo" src="../images/sudedu_logo.png" alt="sudEdu">
                </div>
            </a>

            <!-- Desktop Navigation -->
            <div class="main-nav-links invisible">
                <a href="index.html" class="main-nav-link main-nav-link-active">Praktika</a>
                <a href="uzduotys.html" class="main-nav-link">Užduotys</a>
                <a href="klase.html" class="main-nav-link">Klasė</a>
                <a href="augintiniai.html" class="main-nav-link">Augintiniai</a>
                <a href="apie.html" class="main-nav-link">Apie Sudedu</a>
                
                <div class="main-nav-language-dropdown" id="languageDropdown">
                    <button class="main-nav-language-btn" id="languageBtn">
                        <span id="currentLanguage">LT</span>
                        <span class="main-nav-language-arrow"></span>
                    </button>
                    <div class="main-nav-language-menu">
                        <button class="main-nav-language-option selected" data-lang="LT">LT</button>
                        <button class="main-nav-language-option" data-lang="EN">EN</button>
                    </div>
                </div>
                
                
                <div class="main-nav-connect-wrapper">
                    <div class="main-nav-connect-glow"></div>
                    <button class="main-nav-log-out-btn">
                        <span class="main-nav-connect-text">Atsijungti</span>
                    </button>

                    <button class="main-nav-log-in-btn">
                        <span class="main-nav-connect-text">Prisijungti</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Button -->
            <button class="main-nav-mobile-btn" id="mainNavMobileBtn">
                <span class="main-nav-hamburger"></span>
                <span class="main-nav-hamburger"></span>
                <span class="main-nav-hamburger"></span>
            </button>

            <!-- Mobile Menu -->
            <div class="main-nav-mobile-menu" id="mainNavMobileMenu">
                <a href="index.html" class="main-nav-mobile-link active">Praktika</a>
                <a href="uzduotys.html" class="main-nav-mobile-link">Užduotys</a>
                <a href="klase.html" class="main-nav-mobile-link">Klasė</a>
                <a href="augintiniai.html" class="main-nav-mobile-link">Augintiniai</a>
                <a href="apie.html" class="main-nav-mobile-link">Apie Sudedu</a>
                
                <div class="main-nav-mobile-language">
                    <button class="language-option language-option-LT selected" onclick="setLanguage('LT')">LT</button>
                    <span class="language-separator">/</span>
                    <button class="language-option language-option-EN" onclick="setLanguage('EN')">EN</button>
                </div>
                
                <button class="main-nav-mobile-log-out-btn">
                    <span class="main-nav-connect-text">Atsijungti</span>
                </button>
                <button class="main-nav-mobile-log-in-btn">
                    <span class="main-nav-connect-text">Prisijungti</span>
                </button>
            </div>
        </div>
    </nav>


	<div class="container" id="template-container" hidden>		
		<!-- POPUP ELEMENTS START -->
		<div class="class-popup-modal" id="classPopup">
			<div class="class-popup-content">
                <button type="button" class="temp-login-btn" id="authBtn" onclick="window.location.href=getLoginPage()">
                    Prisijunk
                </button>
                <div class="divider">
                    <span>arba</span>
                </div>
                <select class="class-options" id="classSelect">
                    <option value="" selected disabled>Pasirink savo klasę</option>
                    <option value="0">Priešmokyklinė</option>
                    <option value="1">1 klasė</option>
                    <option value="2">2 klasė</option>
                    <option value="3">3 klasė</option>
                    <option value="4">4 klasė</option>
                    <option value="5">Aukštesnė</option>
                </select>
                <button class="class-popup-button" id="classPopupButton" disabled>Pirmyn!</button>
			</div>
		</div>

        <div class="class-popup-modal" id="classPopupLoggedInClassConfirmation">
			<div class="class-popup-content">
                <select class="class-options" id="classLoggedInClassSelect">
                    <option value="" selected disabled>Pasirink savo klasę</option>
                    <option value="0">Priešmokyklinė</option>
                    <option value="1">1 klasė</option>
                    <option value="2">2 klasė</option>
                    <option value="3">3 klasė</option>
                    <option value="4">4 klasė</option>
                    <option value="5">Aukštesnė</option>
                </select>
                <button class="class-popup-button" id="classPopupLoggedInClassConfirmationButton" disabled>Pirmyn!</button>
			</div>
		</div>
		<!-- POPUP ELEMENTS END -->

		<div class="container-inner">
			<div class="middle-div hide-scrollbar">
                <div class="practice-outer-div">
				<div class="practice-label-div free-practice-div">
					<div class="practice-label">PRAKTIKUOTIS</div>
				</div>
				<div class="new-task-outer-div" id="middle-div-row">
		                <div id="new-task-options-container">
                            <div id="new-task-options-container-inner" class="hide-scrollbar scroll-indicators">
                            <div class="ode_choice_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice" id="mode_choice">
                                    <option value="math">MATEMATIKĄ</option>
                                    <option value="lang">LIETUVIŲ KALBĄ</option>
                                </select>
                            </div>

                            <div class="mode_choice_1_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_1" id="mode_choice_1">
                                    <option value="C1">SUDĖTĮ</option>
                                    <option value="C2">ATIMTĮ</option>
                                    <option value="C3">SUDĖTĮ IR ATIMTĮ</option>
                                    <option value="C4">DAUGYBĄ</option>
                                    <option value="C5">DALYBĄ</option>
                                    <option value="C6">DAUGYBĄ IR DALYBĄ</option>
                                    <option value="C7">ĮVAIRIUS VEIKSMUS</option>
                                </select>
                            </div>

                            <div class="mode_choice_2_div">
                                <div class="col-12 d-flex justify-content-center align-items-center mode_choice_2_div text-center" id="mode_choice_2_div">
                                    <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_2" id="mode_choice_2">
                                        <option value="C8">VIENAŽENKLIŲ SKAIČIŲ IKI 10</option>
                                        <option value="C9">VIENAŽENKLIŲ SKAIČIŲ IKI 20 (LENTELINĖ SUDĖTIS)</option>
                                        <option value="C10">DVIŽENKLIO IR VIENAŽENKLIO SKAIČIŲ IKI 20</option>
                                        <option value="C11">DVIŽENKLIO IR VIENAŽENKLIO SKAIČIŲ IKI 100</option>
                                        <option value="C12">DVIŽENKLIŲ SKAIČIŲ IKI 100</option>
                                        <option value="C13">SKAIČIŲ IKI 1 000</option>
                                        <option value="C14">SKAIČIŲ IKI 10 000</option>
                                        <option value="C15">SKAIČIŲ IKI 1 000 000</option>
                                    </select>
                                </div>
                            </div>

                            <div class="selected_numbers_div">
                                <div class="selected_numbers_inner_div">
                                    <label class="number-choice-label-nuo" for="selected_number" id="number_label" style="display: none;">NUO</label>
                                    <select class="btn btn-secondary dropdown-toggle dropdown text-center" name="selected_number" id="selected_number" style="display: none;">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                    </select>
                                    <label class="number-choice-label-iki" for="selected_number_2" id="number_label_2" style="display: none;">IKI</label>
                                    <select class="btn btn-secondary dropdown-toggle dropdown text-center" name="selected_number_2" id="selected_number_2" style="display: none;">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                    </select>
                                </div>
                            </div>

                            <div class="remainder-div">
                                <label id="remainder-option" style="display: none;">
                                    <input id="remainder-input" type="checkbox" name="myCheckbox"> DALYBA SU LIEKANA
                                </label>
                            </div>

                            <div class="mode_choice_3_div">
                                <div class="col-12 d-flex justify-content-center align-items-center text-center mode_choice_3_div" id="mode_choice_3_div">
                                    <select class="btn btn-secondary dropdown-toggle dropdown text-center" name="mode_choice_3" id="mode_choice_3">
                                        <option value="C37">NEPERŽENGIANT DEŠIMTIES</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mode_choice_5_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_5" id="mode_choice_5">
                                    <option value="C41">SKAITINĖ LYGYBĖ</option>
                                    <option value="C42">SKAITINĖ LYGYBĖ SU NEŽINOMUOJU</option>
                                </select>
                            </div>

                            <div class="mode_choice_6_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_6" id="mode_choice_6" style="display: none;">
                                    <option value="C43">NEŽINOMAS DĖMUO</option>
                                </select>
                            </div>

                            <div class="mode_choice_7_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_7" id="mode_choice_7" style="display: block;">
                                    <option value="C47">EILUTE</option>
                                    <option value="C48">STULPELIU / KAMPU</option>
                                </select>
                            </div>

                            <div class="mode_choice_8_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_8" id="mode_choice_8" style="display: none;">
                                    <option value="C49">TEKSTO SUPRATIMĄ</option>
                                    <option value="C83">GRAMATIKĄ</option>
                                </select>
                            </div>

                            <div class="mode_choice_9_div">
                                <div class="col-12 d-flex justify-content-center align-items-center mode_choice_9_div text-center" id="mode_choice_9_div">
                                    <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_9" id="mode_choice_9" style="display: none;">
                                        <option value="C51">TURINIO KOMPONAVIMĄ</option>
                                        <option value="C52">STRUKTŪROS IŠDĖSTYMĄ</option>
                                    </select>
                                </div>
                            </div>

                            <div class="class_choice_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="class_choice" id="class_choice" style="display: none;">
                                    <option value="C75">1-2 KLASĖ</option>
                                    <option value="C76">3-4 KLASĖ</option>
                                </select>
                            </div>

                            <div class="mode_choice_10_div">
                                <div class="col-12 d-flex justify-content-center align-items-center mode_choice_10_div text-center" id="mode_choice_10_div">
                                    <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_10" id="mode_choice_10" style="display: none;">
                                        <option value="C58">LENGVAS</option>
                                        <option value="C59">VIDUTINIS</option>
                                        <option value="C60">SUNKUS</option>
                                    </select>
                                </div>
                            </div>

                            <div class="rasyba-options-row">

                                <!--
                                    To add a new controlled section, you just need:
                                    <input type="checkbox" class="r parent-toggle" value='NEW_CATEGORY' data-controls="new-div">
                                    <div id="new-div" data-parent="NEW_CATEGORY">
                                        child checkboxes here
                                    </div>
                                -->

                                <div class="mode_choice_11_div" id="mode_choice_11_div" style="display: none;">
                                    <label class="rasyba-options-label">
                                        <input type="checkbox" class="r parent-toggle" name="r" value='GALŪNĖS' data-controls="galuniu-div" checked>
                                        <span class="rasyba-options-label-text" id="rasyba-options-label-text-galune">ŽODŽIO PABAIGA:</span>
                                    </label>
                                    <br>
                                    <div id="galuniu-div" data-parent="GALŪNĖS">
                                        <label class="rasyba-options-label options-for-first-second-classes">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C85": []}' checked>
                                            <span class="rasyba-options-label-text">KĄ VIENĄ?</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-first-second-classes">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C86": []}' checked>
                                            <span class="rasyba-options-label-text">KO DAUG?</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-first-second-classes">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C87": []}' checked>
                                            <span class="rasyba-options-label-text">KUR KAME?</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                            <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C62": []}'>
                                            <span class="rasyba-options-label-text">DAIKTAVARDŽIAI</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                            <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C63": []}'>
                                            <span class="rasyba-options-label-text">BŪDVARDŽIAI IR PRIEVEIKSMIAI</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                            <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C65": []}'>
                                            <span class="rasyba-options-label-text">VEIKSMAŽODŽIAI</span>
                                            <br>
                                        </label>
                                        <div class="mode_choice_12_div" id="mode_choice_12_div">
                                            <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_12" id="mode_choice_12">
                                                <option value="C73">LENGVESNĖS KOMBINACIJOS</option>
                                                <option value="C74">SUNKESNĖS KOMBINACIJOS</option>
                                            </select>
                                        </div>
                                    </div>
                                    <label class="rasyba-options-label">
                                        <input id="C66" type="checkbox" class="rasyba-options" name="rasyba-option" value='{"C66": []}' checked>
                                        <span class="rasyba-options-label-text">ĮSIDĖMĖTINA RAŠYBA</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                        <input id="C64" type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C64": []}' checked>
                                        <span class="rasyba-options-label-text">SUDURTINIAI ŽODŽIAI</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                        <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C71": []}'>
                                        <span class="rasyba-options-label-text">PRIEBALSIŲ SUPANAŠĖJIMAS</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-first-second-classes" style="display: block;">
                                        <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C67": []}' checked>
                                        <span class="rasyba-options-label-text">PANAŠIAI SKAMBANČIOS PRIEBALSĖS</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-first-second-classes temporarily-disabled" style="display: block;">
                                        <input type="checkbox" class="r parent-toggle" name="r" value='BALSĖS:' data-controls="balsiu-div" checked>
                                        <span class="rasyba-options-label-text">BALSĖS</span>
                                        <br>
                                    </label>
                                    <div id="balsiu-div temporarily-disabled" data-parent="BALSĖS">
                                        <label class="rasyba-options-label options-for-first-second-classes temporarily-disabled">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C88": []}' checked>
                                            <span class="rasyba-options-label-text">E — Ė</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-first-second-classes temporarily-disabled">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C89": []}' checked>
                                            <span class="rasyba-options-label-text">I — Y</span>
                                            <br>
                                        </label>
                                        <label class="rasyba-options-label options-for-first-second-classes temporarily-disabled">
                                            <input type="checkbox" class="rasyba-options options-for-first-second-classes-input" name="rasyba-option" value='{"C90": []}' checked>
                                            <span class="rasyba-options-label-text">U — Ū</span>
                                            <br>
                                        </label>
                                    </div>
                                    <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                        <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C72": []}'>
                                        <span class="rasyba-options-label-text">MIŠRIEJI DVIGARSIAI</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                        <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C69": []}'>
                                        <span class="rasyba-options-label-text">PRIEŠDĖLIAI</span>
                                        <br>
                                    </label>
                                    <label class="rasyba-options-label options-for-third-fourth-classes" style="display: none;">
                                        <input type="checkbox" class="rasyba-options options-for-third-fourth-classes-input" name="rasyba-option" value='{"C70": []}'>
                                        <span class="rasyba-options-label-text">PRIESAGOS</span>
                                        <br>
                                    </label>
                                </div>

                                <div class="mode_choice_13_div">
                                    <div class="row"></div>
                                    <div class="col-12 d-flex justify-content-center align-items-center mode_choice_13_div text-center" id="mode_choice_13_div">
                                        <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_13" id="mode_choice_13" style="display: none;">
                                            <option value="3">RETESNI ATVEJAI</option>
                                            <option value="1">DAŽNESNI ATVEJAI</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="mode_choice_14_div">
                                <div class="col-12 d-flex justify-content-center align-items-center mode_choice_14_div text-center" id="mode_choice_14_div">
                                    <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="mode_choice_14" id="mode_choice_14" style="display: none;">
                                        <option value="C80">BE DISTRAKTORIAUS</option>
                                        <option value="C81">SU DISTRAKTORIUMI</option>
                                    </select>
                                </div>
                            </div>

                            <div class="modeChoice4_div">
                                <select class="btn btn-secondary dropdown-toggle dropdown dropdown-options" name="modeChoice4" id="mode_choice_4" style="display: block;">
                                    <option value="C40">NUSTATYTI VEIKSMŲ KIEKĮ</option>
                                    <option value="C39">NUSTATYTI LAIKO TRUKMĘ</option>
                                </select>
                            </div>
                                <div class="timer-question-number-div">
                                <div class="timer-input-div" id="timer-input-div" style="display: none;">
                                    <div class="input-group">
                                    <div class="input-wrapper">
                                        <button class="control-btn timer-minus">−</button>
                                        <input type="number" class="timer-input" id="timer-input" min="1" max="60" step="1" value="5" readonly>
                                        <button class="control-btn timer-plus">+</button>
                                    </div>
                                    <h3 class="timer-choice-label">minutes</h3>
                                    </div>
                                </div>

                                <div class="question-number-input-div" id="question-number-input-div">
                                    <div class="input-group">
                                    <div class="input-wrapper">
                                        <button class="control-btn question-minus">−</button>
                                        <input type="number" class="question-number-input" id="question-number-input" min="1" max="200" step="1" value="20" readonly>
                                        <button class="control-btn question-plus">+</button>
                                    </div>
                                    <h3 class="answer-number-label">veiksmų</h3>
                                    </div>
                                </div>
                                </div>
                        </div>
                    </div>
				</div>
            <div class="submit-button-div">
                <div class="earnings-estimation-outer">
                <button class="earnings-estimation-display info-button custom-coin-amount"
                    onclick="openObjectPopup(infoMessages['coin-amount-custom'].content, infoMessages['coin-amount-custom'].title, infoMessages['coin-amount-custom'].subtitle)">
                    <div class="potetnital-earnings-amount-and-info-holder">
                        <span class="potetnital-earnings-coin-icon-and-amount-holder">
                        <span class="earnings-iki-holder custom-earnings-iki-holder">
                        </span>
                        <span class="coin-icon">
                                <img src="../images/icons/icon-sudedu-coin.png">
                        </span>
                        <span class="coin-amount"></span>
                        </span>
                        <div 
                            class="info-icon"
                            >
                        <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 256 256" xml:space="preserve">
                        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                            <path d="M 49.083 71.489 l 5.776 -21.96 l 4.186 -15.247 c 3.497 -16.18 -32.704 -2.439 -38.002 1.695 l 0.425 4.853 c 4.824 -3.395 23.091 -7.744 19.449 4.275 l -1.634 6.135 l 0 0 l -8.329 31.071 c -3.497 16.18 32.704 2.439 38.002 -1.695 l -0.425 -4.853 C 63.708 79.159 45.441 83.508 49.083 71.489 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                            <circle cx="53.871" cy="11.201" r="11.201" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform="  matrix(1 0 0 1 0 0) "/>
                        </g>
                        </svg>
                        </div>
                    </div>
                </button>
            </div>

                <div class="submit-button-outer">
				    <button class="submit-button">Pradėti</button>
                </div>
			</div>
            </div>
            <div class="message-board-personal-chl-container">

            <div class="message-board-container">
                <div class="board-header">
                    <div class="board-title">Naujienos</div>
                    <div class="board-date" id="currentDate"></div>
                </div>
                <div class="message-board-outer">
                    <div class="message-board hide-scrollbar scroll-indicators" id="messageBoard">
                        <!-- Messages will be inserted here -->
                    </div>
                </div>
            </div>
            
            <div class="personal-chl-container">
                <div class="chl-header">
                    <div class="personal-chl-label">IŠŠŪKIAI</div>
                    <div class="chl-nav-arrows">
                        <button class="chl-nav-btn chl-nav-prev" id="chlNavPrev">
                            <svg fill="currentColor" viewBox="0 0 24 24" width="16" height="16">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <div class="chl-indicators" id="chlIndicators">
                        <!-- Indicators will be inserted here -->
                        </div>
                        <button class="chl-nav-btn chl-nav-next" id="chlNavNext">
                            <svg fill="currentColor" viewBox="0 0 24 24" width="16" height="16">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="personal-chl-content-holder">
                    <div class="personal-chl-container-outer">
                        <div class="personal-chl-container-inner">
                            <div id="chlDisplayArea"></div>
                        </div>
                    </div>
                </div>
            </div>
			</div>
            </div>
		</div>


	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../parameter_dictionary.js"></script>
	<script src="../mental-arithmetic.js"></script>
	<script src="../mental-arithmetic-combinations.js"></script>
    <script src="../main-nav-bar.js"></script>
	<script src="matematika_options.js"></script>

	<script>
        let userClass;

		function submitSelection() {
            resetControllerTaskSettings();
			let modeChoiceSelection = document.querySelector('#mode_choice').value;
			if (localStorage.getItem('controller') !== null) {
				controller = JSON.parse(localStorage.getItem('controller'))
			}

			if (modeChoiceSelection === "math") {
				controller.mode = 'math';
			} else if (modeChoiceSelection === "lang") {
				controller.mode = 'lang';
			}

			controller.language = "LT";

			if (controller.mode === "math") {
				modeChoice1Selection = modeChoice1Element.value;
				modeChoice2Selection = modeChoice2Element.value;
				selectedNumbers = [selectedNumberElement.value, selectedNumber2Element.value].sort();
				modeChoice3Selection = modeChoice3Element.value;
				modeChoice5Selection = modeChoice5Element.value;
				modeChoice6Selection = modeChoice6Element.value;
				modeChoice7Selection = modeChoice7Element.value;

				var checkbox = document.getElementById("remainder-input");

				controller.modeChoice1 = modeChoice1Selection;
				controller.modeChoice2 = modeChoice2Selection;
				controller.selectedNumbers = selectedNumbers;
				controller.withRemainder = checkbox.checked;
				if (modeChoice3Selection === "C37") {
					controller.modeChoice3 = true;
				} else if (modeChoice3Selection === "C38") {
					controller.modeChoice3 = false;
				} else {
                    controller.modeChoice3 = true;
                }
				controller.modeChoice5 = modeChoice5Selection;
				controller.modeChoice6 = modeChoice6Selection;
				controller.modeChoice7 = modeChoice7Selection;
				controller.modeChoice8 = 'C79';
				controller.result = ['', '', '', '', '']
				controller.task = null;
                controller.taskCompleted = false;
	            controller.taskRecorded = false;

			} else if (controller.mode === "lang") {
				const modeChoice8Value = document.querySelector('#mode_choice_8').value;
				const rasybaOptions = document.querySelectorAll('[name="rasyba-option"]');
				let anyChecked = false;
				rasybaOptions.forEach(option => {
				if (option.checked) {
					anyChecked = true;
				}
				});
                if ((modeChoice8Value === "rasyba" && anyChecked) || modeChoice8Value !== "rasyba") {
                    modeChoice8Selection = modeChoice8Element.value;
                    modeChoice9Selection = modeChoice9Element.value;
                    modeChoice12Selection = modeChoice12Element.value;
                    modeChoice13Selection = modeChoice13Element.value;
                    modeChoice14Selection = modeChoice14Element.value;
                    classChoiceSelection = classChoiceElement.value;

                    controller.classChoice = classChoiceSelection;
                    controller.modeChoice1 = modeChoice8Selection;
                    controller.modeChoice2 = modeChoice9Selection;
                    controller.modeChoice6 = modeChoice14Selection;
                    controller.modeChoice7 = "C82";
                    controller.modeChoice8 = generateSessionSeed();

                    controller.modeChoice3 = getSelectedRasybaConditions();
                    controller.modeChoice5 = modeChoice12Selection;
                    controller.result = ['', '', '', '', ''];
                    controller.modeChoiceLtDifficulty = document.getElementById('mode_choice_10').value;
                    if (controller.classChoice === "C75") {
                        controller.questionFrequency = Number(modeChoice13Selection);
                    } else {
                        controller.questionFrequency = 1;
                    }
                }
            }
        	controller.modeChoice4 = modeChoice4Element.value
			localStorage.setItem('controller', JSON.stringify(controller))

			if (controller.modeChoice4 === "C39") {
				startQuestionsTimer()
			} else if (controller.modeChoice4 = "C40") {
				startQuestionsNumber()
			}
		}

		let submitButtonElement = document.querySelector('.submit-button');
		submitButtonElement.addEventListener("click", submitSelection);

		window.onload = function () {
            wakeUpServer();
            const savedController = localStorage.getItem('controller');
            if (savedController) {
                controller = JSON.parse(savedController);
                redirectToAppropriateLanguage(controller.language);
                resetControllerTaskSettings();
            } else {
                controller.language = "LT";
                localStorage.setItem('controller', JSON.stringify(controller));
            }

            if (!userData || userData?.accType === "teacher") {
                document.querySelectorAll('.earnings-estimation-outer').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelector(".submit-button-outer").style.justifyContent = "center";
            } else {
                updateControllerCustomTaskChoices();
                displayCustomTaskPotentialEarnings();
            }

            if (userData?.accType === "teacher") {
                document.querySelector(".personal-chl-container").style.display = "none";
            }
            
			document.querySelector('#template-container').removeAttribute('hidden');
		};

		window.addEventListener("pageshow", function() {
    var selects = document.querySelectorAll('select');
    selects.forEach(function(select) {
        var selectedOption = select.querySelector('[selected]');
        var selectedIndex = selectedOption ? Array.from(select.children).indexOf(selectedOption) : 0;
        select.selectedIndex = selectedIndex;
    });

    var checkbox = document.getElementById('remainder-input');
    if (checkbox) {
        checkbox.checked = false; // Deselect the checkbox
    }
});

//POPUP SCRIPT START

// Function to set value in localStorage with expiration
function setClassLocalStorage(classValue) {
    const now = new Date();
    // Set expiration to 2 months from now
    const expiration = new Date(now.setMonth(now.getMonth() + 2));
    
    const item = {
        value: classValue,
        expiration: expiration.getTime()
    };
    
    localStorage.setItem("userClassNotLoggedIn", JSON.stringify(item));
}

// Function to get value from localStorage and check expiration
function getClassLocalStorage() {
    const itemStr = localStorage.getItem("userClassNotLoggedIn");
    
    // If the item doesn't exist, return null
    if (!itemStr) {
        return null;
    }
    
    const item = JSON.parse(itemStr);
    const now = new Date();
    
    // Compare the expiration time with the current time
    if (now.getTime() > item.expiration) {
        // If the item is expired, delete it and return null
        localStorage.removeItem("userClassNotLoggedIn");
        return null;
    }
    
    return item.value;
}

function showClassPopup() {
    const popup = document.getElementById('classPopup');
    const nextButton = document.getElementById('classPopupButton');
    const classSelect = document.getElementById('classSelect');
    let selectedClass = null;

    // Show popup
    popup.classList.add('active');
    document.body.classList.add('popup-active');

    // Disable Next button initially
    nextButton.disabled = true;

    // Listen for changes in the dropdown
    classSelect.addEventListener('change', function() {
        selectedClass = Number(this.value);
        nextButton.disabled = this.value === ""; // enable only if a real option is selected
    });

    // Next button click
    nextButton.addEventListener('click', async function() {
        if (selectedClass !== null && selectedClass !== undefined) {
            // Set localStorage with selected class and expiration
            setClassLocalStorage(selectedClass);

            userClass = selectedClass;

            if (userData) {
                updateUserClass(userClass);
                userData.knowledgeLvl = userClass;
                localStorage.setItem('userData', JSON.stringify(userData));
            }

            // Close popup
            popup.classList.remove('active');
            document.body.classList.remove('popup-active');

            await displayPersonalChl();
        }
    });
}

function showClassPopupLoggedInClassConfirmation() {
    const popup = document.getElementById('classPopupLoggedInClassConfirmation');
    const nextButton = document.getElementById('classPopupLoggedInClassConfirmationButton');
    const classSelect = document.getElementById('classLoggedInClassSelect');
    let selectedClass = null;

    // Show popup
    popup.classList.add('active');
    document.body.classList.add('popup-active');

    // Disable Next button initially
    nextButton.disabled = true;

    // Listen for changes in the dropdown
    classSelect.addEventListener('change', function() {
        selectedClass = Number(this.value);
        nextButton.disabled = this.value === ""; // enable only if a real option is selected
    });

    // Next button click
    nextButton.addEventListener('click', async function() {
        if (selectedClass !== null && selectedClass !== undefined) {
            // Set localStorage with selected class and expiration
            setClassLocalStorage(selectedClass);

            userClass = selectedClass;

            if (userData) {
                updateUserClass(userClass);
                userData.knowledgeLvl = userClass;
                localStorage.setItem('userData', JSON.stringify(userData));
            }

            // Close popup
            popup.classList.remove('active');
            document.body.classList.remove('popup-active');

            await displayPersonalChl();
            displayCustomTaskPotentialEarnings();
        }
    });
}


async function updateUserClass (userClassSelection) {
    try {
        const response = await apiFetch(apiBase + `students/knowledge-level`, {
            method: "PATCH",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                studentId: userData.userId,
                knowledgeLvl: Number(userClassSelection)
            })
        });

        if (!response) {
            return;
        }

        if (!response.ok) {
            throw new Error("Nepavyko atnaujinti lygio");
        }

        const data = await response.json();
    } catch (error) {
        console.error("Error updating knowledge level:", error);
    }
}

//POPUP SCRIPT END
      
const messagesToUsers = [
        {   
            title: "Žinių lygio patikslinimas",
            text: `❗❗❗ SVARBI INFORMACIJA MOKYTOJAMS! Patikrinkite ir, jei reikia, pakoreguokite savo mokinių žinių lygį! (plačiau <a href="apie.html#ziniu-lygis">čia</a>).`,
            fullText: `Nuo nustatyto žinių lygio priklauso mokinio taškų bei atlygio (SUDEDU monetų) skaičiavimas. Mokiniai registruodamiesi pasirenka savo klasę, tačiau labai svarbu patikrinti, ar mokinys pasirinko teisingai. Taip pat, svarbu pakoreguoti žinių lygį mokiniams, besimokantiems pagal pritaikytą dalyko programą (plačiau <a href="apie.html#ziniu-lygis">čia</a>).`,
            date: "2025-12-15", 
            target: ["teacher"]
        },
        {
            title: "Išdrįsk priimti KLASĖS IŠŠŪKĮ!",
            text: `🚀 Išdrįsk priimti KLASĖS SAVAITINĮ IŠŠŪKĮ! 🚀 Skaityk plačiau <a href="apie.html#klasės-issūkis">čia</a>.`,
            fullText: `Puslapyje „Klasė“ gali rasti klasės savaitės iššūkį. Iššūkį galima atlikti tiek kartų, kiek nori – kiekvienas bandymas priartina tave prie pergalės! 💪 Bus skaičiuojamas geriausias tavo savaitės rezultatas, kuris susirungs su klasės draugų pasiekimais. 🏆 Top 3 dalyviai užims prizines vietas ir gaus papildomai SUDEDU monetų!
                        Tai tavo šansas parodyti, ką gali, pagerinti savo įgūdžius ir būti pastebėtam. 🔥 Nesustok – bandyk, tobulėk ir laimėk! 🔥 Skaityk plačiau <a href="apie.html#klasės-issūkis">čia</a>.`,
            date: "2025-12-15", 
            target: ["student"]
        },
        {
            title: "Prisijunkite ir išnaudokite visas SUDEDU galimybes!",
            text: `❗❗❗ Nuo kitų metų SUDEDU platforma (nemokamai) bus galima naudotis tik prisijungus prie paskyros!`,
            fullText: `Naudodamiesi SUDEDU platforma prisijungę prie paskyros, gaunate prieigą prie daugybės naudingų funkcijų! 👇  
            <br>
            <br>
            👩‍🎓 <strong>Mokiniai</strong> – prisijungę galėsite:<br>
            • uždirbti SUDEDU monetas ir išleisti jas gražindami savo virtualius namus bei lepindami virtualų augintinį 🐾  <br>
            • praktikuotis savarankiškai net ir nesusieję savo paskyros su mokytojo 🧠 <br>
            <br>
            👩‍🏫 <strong>Mokytojai</strong> – prisijungę galėsite:<br>
            • priskirti aktualias užduotis mokiniams 📝 <br> 
            • analizuoti rezultatus ir pažangą 📊  <br>
            <br>
            👉 Jei jau turite paskyrą – prisijunkite, jei dar neturite – susikurkite naują ir pradėkite naudotis visomis funkcijomis jau dabar!  <br>
            ⚠️ Nuo kitų metų SUDEDU platforma (nemokamai) bus <strong>galima naudotis tik prisijungus prie paskyros</strong>!`,
            date: "2025-12-14",
            target: ["student", "teacher"]
        },
        {
            title: "SUDEDU atsinaujino!",
            text: `Sveiki atvykę į atsinaujinusią SUDEDU platformą! Apie pakeitimus ir naujas galimybes skaitykite <a href="apie.html">čia</a>.`,
            fullText: `Atsinaujinusi SUDEDU platforma siūlo gausybę naujų funkcijų, tokių kaip patogesnis naudojimasis prietaisuose su mažesniais ekranais, virtualūs augintiniai ir namai mokiniams, bendra klasės erdvė visiems jos nariams ir naujos įžvalgos apie mokinių darbo rezultatus bei progresą mokytojams. Visos naujos galimybės detaliai aprašytos <a href="apie.html">čia</a>.`,
            date: "2025-12-14", 
            target: ["all"]
        },
    ];

function displayMessages () {
    const messageBoard = document.getElementById('messageBoard');
    const currentDateEl = document.getElementById('currentDate');

    // Set current date (full long form)
    const today = new Date();
    const dateStr = today.toLocaleDateString('lt-LT', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    });
    currentDateEl.textContent = dateStr;

    const userType = userData?.accType || 'all';

    // Filter messages for this user type
    const visibleMessages = messagesToUsers.filter(msg =>
        msg.target.includes('all') || msg.target.includes(userType)
    );

    // Clear board before populating
    messageBoard.innerHTML = '';

    const lithuanianMonths = [
      'Saus.', 'Vas.', 'Kov.', 'Bal.', 'Geg.', 'Birž.',
      'Liep.', 'Rugp.', 'Rugs.', 'Spal.', 'Lap.', 'Gruod.'
    ];

    // Populate messages
    if (visibleMessages.length > 0) {
        visibleMessages.forEach(msg => {
            const messageEl = document.createElement('div');
            messageEl.className = 'board-message';

            // Use msg.date if available, otherwise fallback to today
            // Safely parse YYYY-MM-DD to avoid timezone problems
            let msgDate;
            if (msg.date && typeof msg.date === 'string') {
                const parts = msg.date.split('-').map(Number);
                if (parts.length === 3 && !Number.isNaN(parts[0])) {
                    // new Date(year, monthIndex, day)
                    msgDate = new Date(parts[0], (parts[1] || 1) - 1, parts[2] || 1);
                } else {
                    msgDate = new Date(msg.date); // fallback
                }
            } else {
                msgDate = new Date();
            }

            const day = msgDate.getDate();
            const monthIndex = msgDate.getMonth(); // 0–11

            // day first, then short month (e.g. "20 Sau.")
            const formattedDate = `${lithuanianMonths[monthIndex]} ${day}`;

            messageEl.innerHTML = `
                <div class="message-text">${msg.text}</div>
                <div class="message-meta">${formattedDate}</div>
            `;

            // Open full popup when clicked
            messageEl.addEventListener('click', () => openObjectPopup(msg.fullText, msg.title, msg.date) );
            messageBoard.appendChild(messageEl);
        });
    } else {
        messageBoard.innerHTML = '<div class="empty-message">Naujienų nėra!</div>';
    }
}


displayMessages();

const timerInputElement = document.querySelector('#timer-input');
const questionNumberInputElement = document.querySelector('#question-number-input');

const personalChlDict = {
    0: {
        "9-10": {
            "math": [
                `[["math","C1","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C2","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C3","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C67":[]},"C73",3], ["C40","1"]]`
            ]
        },
        "11-12": {
            "math": [
                `[["math","C1","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C67":[]},"C73",3], ["C40","1"]]`
            ]
        },
        "1-2": {
            "math": [
                `[["math","C1","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C67":[]},"C73",3], ["C40","1"]]`
            ]
        },
        "3-8": {
            "math": [
                `[["math","C1","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C10","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C10","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C10","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C67":[]},"C73",3], ["C40","1"]]`
            ]
        }
    },
    1: {
        "9-10": {
            "math": [
                `[["math","C1","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C8","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C1","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C8","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C8","C37","C42","C44","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,

                `[["math","C3","C10","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C10","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C3","C10","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C67":[]},"C73",3], ["C40","1"]]`
            ]
        },
        "11-12": {
            "math": [
                `[["math","C1","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C8","C37","C42","C44","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C9","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C10","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C17","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C58"], ["C40","1"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C58"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C58"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C67":[],"C68":[]},"C73",3], ["C40","3"]]`
            ]
        },
        "1-2": {
            "math": [
                `[["math","C1","C9","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C2","C10","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C3","C17","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,

                `[["math","C1","C9","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C10","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C10","C38","C42","C44","C47",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C3","C17","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","15"]]`,

                `[["math","C3","C8","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","40"]]`,              
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C58"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C58"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C58"], ["C40","1"]]`,
                `[["lang","C49","C51", "C80", "C82", "C75","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C67":[],"C68":[]},"C73",3], ["C40","5"]]`
            ]
        },
        "3-8": {
            "math": [
                `[["math","C3","C17","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,

                `[["math","C1","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C11","C38","C42","C44","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,

                `[["math","C1","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C12","C37","C42","C44","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C58"], ["C40","4"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C58"], ["C40","3"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C58"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C66":["2kl"],"C67":[],"C68":[]},"C73",3], ["C40","5"]]`
            ]
        }
    },
    2: {
        "9-10": {
            "math": [
                `[["math","C3","C17","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,

                `[["math","C1","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C11","C38","C42","C44","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,

                `[["math","C1","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C37","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C12","C37","C42","C44","C47",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C12","C37","C42","C43","C47",["1","1"],false,"C79"], ["C40","10"]]`,

                `[["math","C1","C12","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C1","C12","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C12","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,

                `[["math","C4","C18","","C41","C45","C47",["2","5"],false,"C79"], ["C40","30"]]`,
                `[["math","C4","C18","","C42","C45","C47",["2","5"],false,"C79"], ["C40","20"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C66":["2kl"],"C67":[],"C68":[]},"C73",3], ["C40","5"]]`
            ]
        },
        "11-12": {
            "math": [
                `[["math","C4","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","30"]]`,
                `[["math","C4","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C18","","C41","C45","C47",["2","5"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C18","","C42","C45","C47",["2","5"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C18","","C42","C46","C47",["2","5"],false,"C79"], ["C40","10"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C75","C60"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C60"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C66":["2kl"],"C67":[],"C68":[]},"C73",3], ["C40","10"]]`
            ]
        },
        "1-2": {
            "math": [
                `[["math","C4","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","30"]]`,
                `[["math","C4","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","30"]]`,
                `[["math","C5","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C18","","C42","C46","C47",["2","9"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C3","C11","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C3","C11","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C12","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C3","C12","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C75","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C75","C60"], ["C40","1"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C60"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C66":["2kl"],"C67":[],"C68":[]},"C73",1], ["C40","10"]]`
            ]
        },
        "3-8": {
            "math": [
                `[["math","C3","C12","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C6","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C6","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C1","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C75","C60"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C75","C60"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C75","C60"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C75","C60"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C75",{"C61":[],"C66":["2kl"],"C67":[],"C68":[]},"C73",1], ["C40","10"]]`
            ]
        }
    },
    3: {
        "9-10": {
            "math": [
                `[["math","C3","C12","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C6","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C6","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C1","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C1","C14","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C37","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C76","C58"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C58"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C58"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C58"], ["C40","1"]]`,
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C72":[]},"C73",1], ["C40","10"]]`,
            ]
        },
        "11-12": {
            "math": [
                `[["math","C3","C12","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C11","C38","C42","C43","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C33","","C41","C45","C47",["1","1"],false,"C79"], ["C40","30"]]`,
                `[["math","C6","C18","","C41","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C6","C18","","C42","C45","C47",["2","9"],false,"C79"], ["C40","40"]]`,
                `[["math","C1","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C13","C38","C41","C43","C47",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C58"], ["C40","3"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C58"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C72":[]},"C73",1], ["C40","10"]]`,
            ]
        },
        "1-2": {
            "math": [
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C28","","C41","C45","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C28","","C41","C45","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C6","C28","","C41","C45","C47",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C19","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C19","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C20","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C21","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C20","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C21","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C18","","C41","C45","C47",["2","9"],true,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],true,"C79"], ["C40","10"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C7","C34","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C58"], ["C40","3"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C58"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C60"], ["C40","1"]]`
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","10"]]`
            ]
        },
        "3-8": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","10"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C7","C34","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C60"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","15"]]`            ]
        }
    },
    4: {
        "9-10": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","10"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C7","C34","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C23","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C4","C24","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C6","C29","","C41","C45","C47",["1","1"],false,"C79"], ["C40","20"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C72":[]},"C73",1], ["C40","15"]]`,
            ]
        },
        "11-12": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","15"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C76","C60"], ["C40","1"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C60"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C73",1], ["C40","20"]]`,
            ]
        },
        "1-2": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","15"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C2","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C3","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C76","C60"], ["C40","1"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","1"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","20"]]`,
            ]
        },
        "3-8": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","15"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C1","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C2","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
                `[["math","C3","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","5"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C51", "C80", "C82", "C76","C60"], ["C40","2"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C60"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C60"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","20"]]`
            ]
        }
    },
    5: {
        "9-10": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","15"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C7","C34","","C41","C45","C48",["1","1"],false,"C79"], ["C40","25"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C23","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C4","C24","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C6","C29","","C41","C45","C47",["1","1"],false,"C79"], ["C40","25"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C80", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C80", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","2"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","30"]]`
            ]
        },
        "11-12": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","20"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C5","C24","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C25","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","30"]]`
            ]
        },
        "1-2": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","20"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C24","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C25","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","2"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","2"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","30"]]`
            ]
        },
        "3-8": {
            "math": [
                `[["math","C2","C16","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C1","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C2","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C3","C14","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C5","C22","","C41","C45","C47",["1","1"],true,"C79"], ["C40","20"]]`,
                `[["math","C5","C30","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C7","C35","","C41","C45","C48",["1","1"],false,"C79"], ["C40","20"]]`,
                `[["math","C4","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","15"]]`,
                `[["math","C1","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C2","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C3","C15","C38","C41","C43","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                 `[["math","C5","C24","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C25","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
                `[["math","C5","C26","","C41","C45","C48",["1","1"],false,"C79"], ["C40","10"]]`,
            ],
            "text-comp": [
                `[["lang","C49","C51", "C81", "C82", "C76","C59"], ["C40","4"]]`,
                `[["lang","C49","C52", "C81", "C82", "C76","C59"], ["C40","4"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","3"]]`,
                `[["lang","C49","C51", "C81", "C82", "C76","C60"], ["C40","3"]]`,
            ],
            "grammar": [
                `[["lang","C83","C50","C76",{"C62":[],"C63":[],"C64":[],"C65":[],"C66":["4kl"],"C68":[],"C69":[],"C70":[],"C71":[],"C72":[]},"C74",1], ["C40","30"]]`
            ]
        }
    }
}

const typeLabels = {
    "math": "Matematika",
    "text-comp": "Teksto supratimas",
    "grammar": "Gramatika"
};

const tabHeight = 60;
const overlap = 20;
let tabs = [];

function getLithuanianSchoolPeriod(date = new Date(), periods = [
    { name: "9-10", months: [9, 10] },
    { name: "11-12", months: [11, 12] },
    { name: "1-2", months: [1, 2] },
    { name: "3-8", months: [3, 4, 5, 6, 7, 8] },
]) {
    const month = date.getMonth() + 1;
    for (const period of periods) {
        if (period.months.includes(month)) return period.name;
    }
    return "unknown";
}

async function displayPersonalChl() {
    const displayArea = document.getElementById('chlDisplayArea');
    const indicatorsContainer = document.getElementById('chlIndicators');
    const prevBtn = document.getElementById('chlNavPrev');
    const nextBtn = document.getElementById('chlNavNext');
    const userClass = userData?.knowledgeLvl ?? getClassLocalStorage() ?? 2; // 0 (for priesmokykline) is treated as faulty unless ?? is used instead of ||

    if (!personalChlDict[userClass][getLithuanianSchoolPeriod()]) {
        displayArea.innerHTML = '<p style="text-align: center; color: rgba(0,0,0,0.5);">Nėra prieinamų iššūkių</p>';
        return;
    }

    // Clear previous content
    displayArea.innerHTML = '';
    indicatorsContainer.innerHTML = '';

    const classData = personalChlDict[userClass][getLithuanianSchoolPeriod()];
    const challenges = Object.keys(classData).map(key => {
        const items = classData[key];
        const randomItem = JSON.parse(items[Math.floor(Math.random() * items.length)]);
        const randomItemInfo = getOptionTextFromValues(randomItem[0], randomItem[1]);

        return {
            type: key,
            chl: randomItem[0],
            duration: randomItem[1],
            chlInfo: randomItemInfo
        };
    });

    let activeIndex = 0;

    // Create indicators
    challenges.forEach((challenge, index) => {
        const indicator = document.createElement('div');
        indicator.className = `chl-indicator ${challenge.type} ${index === 0 ? 'active' : ''}`;
        indicator.addEventListener('click', () => switchToChallenge(index));
        indicatorsContainer.appendChild(indicator);
    });

    // Create content for each challenge
    for (const [index, challenge] of challenges.entries()) {
        const filteredInfo = challenge.chlInfo.filter(item =>
            !item.includes('KLASĖ') &&
            !item.includes('KOMBINACIJOS') &&
            !item.includes('ATVEJAI')
        );

        const processedItems = [];
        filteredInfo.forEach(item => {
            if (item.includes("<li>")) {
                const splitItems = item.split("<li>");
                splitItems.forEach(splitItem => {
                    if (splitItem.includes("</li>")) {
                        const splitItemProcessed = splitItem.split("</li>")[0];
                        processedItems.push(splitItemProcessed);
                    }
                });
            } else {
                processedItems.push(item);
            }
        });

        if (processedItems.some(i => i === "TEKSTO SUPRATIMAS" || i === "GRAMATIKA")) {
            processedItems.shift();
        }

        const content = document.createElement('div');
        content.className = `chl-category-content chl-content-${challenge.type} ${index === 0 ? 'active' : ''}`;
        content.dataset.type = challenge.type;
        
        const titleDiv = document.createElement('div');
        titleDiv.className = `chl-title chl-title-${challenge.type}`;
        titleDiv.textContent = typeLabels[challenge.type];
        
        const infoDiv = document.createElement('div');
        infoDiv.className = 'chl-info-text hide-scrollbar scroll-indicators';

        const infoDivInner = document.createElement('div');
        infoDivInner.className = 'chl-info-text-inner';
        infoDivInner.textContent = processedItems.join(' • ');

        infoDiv.appendChild(infoDivInner);

        const infoDivHolder = document.createElement('div');
        infoDivHolder.className = 'chl-info-holder';

        infoDivHolder.appendChild(infoDiv);

        const actionBtn = document.createElement('button');
        actionBtn.className = 'chl-action-btn';
        actionBtn.textContent = 'Atlikti';
        actionBtn.addEventListener('click', () => completePersonalChlTask(challenge.chl, challenge.duration));

        const completeButtonDiv = document.createElement('div');
        completeButtonDiv.className = 'complete-button-div';

        if (userData && userData.knowledgeLvl != null) {
            const potentialEarningsDisplay = document.createElement('div');
            let answeringMode = challenge.duration[0];
            let numberOfQuestions = challenge.duration[1];
            let earningsDisplay = "";

            if (answeringMode === "C39" || challenge.chl[1] === "C83") {
                let potentialEarnings = await calculateTasksPerCorrectAnswerPoints(challenge.chl);

                if (potentialEarnings != null) {
                    potentialEarnings = Number((potentialEarnings * personalChlCoinBonusMultiplier).toFixed(2))
                }
                
                earningsDisplay = `
                    <div class="earnings-estimation-outer">
                        <button class="earnings-estimation-display info-button"
                            onclick="openObjectPopup(infoMessages['coin-amount-custom-timer'].content, infoMessages['coin-amount-custom-timer'].title, infoMessages['coin-amount-custom-timer'].subtitle)">
                            <div class="potetnital-earnings-amount-and-info-holder">
                                <span class="potetnital-earnings-coin-icon-and-amount-holder">
                                <span class="earnings-iki-holder">
                                    x
                                </span>
                                <span class="coin-icon">
                                        <img src="../images/icons/icon-sudedu-coin.png">
                                </span>
                                <span class="coin-amount">${potentialEarnings}</span>
                                </span>
                                <div class="info-icon">
                                <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 256 256" xml:space="preserve">
                                <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                    <path d="M 49.083 71.489 l 5.776 -21.96 l 4.186 -15.247 c 3.497 -16.18 -32.704 -2.439 -38.002 1.695 l 0.425 4.853 c 4.824 -3.395 23.091 -7.744 19.449 4.275 l -1.634 6.135 l 0 0 l -8.329 31.071 c -3.497 16.18 32.704 2.439 38.002 -1.695 l -0.425 -4.853 C 63.708 79.159 45.441 83.508 49.083 71.489 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                                    <circle cx="53.871" cy="11.201" r="11.201" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform="  matrix(1 0 0 1 0 0) "/>
                                </g>
                                </svg>
                                </div>
                            </div>
                        </button>
                    </div>
                    `;
            } else if (answeringMode === "C40") {
                let potentialEarnings = await calculateTasksPerCorrectAnswerPoints(challenge.chl);
                if (potentialEarnings != null) {
                    potentialEarnings = Number((potentialEarnings * numberOfQuestions * personalChlCoinBonusMultiplier).toFixed(2));
                }

                earningsDisplay = `
                    <div class="earnings-estimation-outer">
                        <button class="earnings-estimation-display info-button"
                            onclick="openObjectPopup(infoMessages['coin-amount-custom-question-number'].content, infoMessages['coin-amount-custom-question-number'].title, infoMessages['coin-amount-custom-question-number'].subtitle)">
                            <div class="potetnital-earnings-amount-and-info-holder">
                                <span class="potetnital-earnings-coin-icon-and-amount-holder">
                                <span class="earnings-iki-holder">
                                    IKI
                                </span>
                                <span class="coin-icon">
                                        <img src="../images/icons/icon-sudedu-coin.png">
                                </span>
                                <span class="coin-amount">${potentialEarnings}</span>
                                </span>
                                <div class="info-icon">
                                <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 256 256" xml:space="preserve">
                                <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                    <path d="M 49.083 71.489 l 5.776 -21.96 l 4.186 -15.247 c 3.497 -16.18 -32.704 -2.439 -38.002 1.695 l 0.425 4.853 c 4.824 -3.395 23.091 -7.744 19.449 4.275 l -1.634 6.135 l 0 0 l -8.329 31.071 c -3.497 16.18 32.704 2.439 38.002 -1.695 l -0.425 -4.853 C 63.708 79.159 45.441 83.508 49.083 71.489 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                                    <circle cx="53.871" cy="11.201" r="11.201" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;" transform="  matrix(1 0 0 1 0 0) "/>
                                </g>
                                </svg>
                                </div>
                            </div>
                        </button>
                    </div>
                    `;
            }
            potentialEarningsDisplay.innerHTML = earningsDisplay;
            completeButtonDiv.appendChild(potentialEarningsDisplay);
        }

        completeButtonDiv.appendChild(actionBtn);
        content.appendChild(titleDiv);
        content.appendChild(infoDivHolder);
        content.appendChild(completeButtonDiv);
        displayArea.appendChild(content);
    }

    function switchToChallenge(index) {
        activeIndex = index;
        
        // Update indicators
        const indicators = indicatorsContainer.querySelectorAll('.chl-indicator');
        indicators.forEach((ind, i) => {
            ind.classList.toggle('active', i === index);
        });

        // Update content
        const allContent = displayArea.querySelectorAll('.chl-category-content');
        allContent.forEach((content, i) => {
            content.classList.toggle('active', i === index);
        });
    }

    // Arrow button handlers
    prevBtn.addEventListener('click', () => {
        activeIndex = (activeIndex - 1 + challenges.length) % challenges.length;
        switchToChallenge(activeIndex);
    });

    nextBtn.addEventListener('click', () => {
        activeIndex = (activeIndex + 1) % challenges.length;
        switchToChallenge(activeIndex);
    });
}


function completePersonalChlTask(challengeInfo, challengeDuration) {
    resetControllerTaskSettings();

    const parsedCurrentTaskInstructions = challengeInfo;
    const currentTaskDuration = challengeDuration

    if (localStorage.getItem('controller') !== null) {
        controller = JSON.parse(localStorage.getItem('controller'))
    }

    var checkbox = document.getElementById("remainder-input");

    controller.language = "LT";
    
    if (parsedCurrentTaskInstructions[0] === "math") {
        controller.mode = 'math';
        controller.modeChoice1 = parsedCurrentTaskInstructions[1];
        controller.modeChoice2 = parsedCurrentTaskInstructions[2];
        if (parsedCurrentTaskInstructions[3] === "C37") {
            controller.modeChoice3 = true;
        } else if (parsedCurrentTaskInstructions[3] === "C38") {
            controller.modeChoice3 = false;
        } else {
            controller.modeChoice3 = true;
        }
        controller.modeChoice5 = parsedCurrentTaskInstructions[4];
        controller.modeChoice6 = parsedCurrentTaskInstructions[5];
        controller.modeChoice7 = parsedCurrentTaskInstructions[6];
        controller.selectedNumbers = parsedCurrentTaskInstructions[7];
        controller.withRemainder = parsedCurrentTaskInstructions[8];
        controller.modeChoice8 = parsedCurrentTaskInstructions[9];
        controller.task = ["personalChl", null];
        controller.taskCompleted = false;
	    controller.taskRecorded = false;

        controller.modeChoice4 = currentTaskDuration[0];
        controller.setTaskDuration = currentTaskDuration[1];

    } else if (parsedCurrentTaskInstructions[0] === "lang") {
        controller.mode = 'lang';
        if (parsedCurrentTaskInstructions[1] === "C49") {
            console.log(parsedCurrentTaskInstructions)
            controller.modeChoice1 = parsedCurrentTaskInstructions[1];
            controller.modeChoice2 = parsedCurrentTaskInstructions[2];
            controller.modeChoice6 = parsedCurrentTaskInstructions[3];
            controller.modeChoice7 = parsedCurrentTaskInstructions[4];
            controller.classChoice = parsedCurrentTaskInstructions[5];
            controller.modeChoiceLtDifficulty = parsedCurrentTaskInstructions[6];

            controller.task = ["personalChl", null];
            controller.taskCompleted = false;
	        controller.taskRecorded = false;
            
            controller.modeChoice4 = currentTaskDuration[0];
            controller.setTaskDuration = currentTaskDuration[1];

        } else if (parsedCurrentTaskInstructions[1] === "C83") {
            if (parsedCurrentTaskInstructions[2] === "C50") {
                controller.modeChoice1 = parsedCurrentTaskInstructions[1];
                controller.modeChoice2 = parsedCurrentTaskInstructions[2];
                controller.classChoice = parsedCurrentTaskInstructions[3];
                controller.modeChoice3 = parsedCurrentTaskInstructions[4];
                controller.modeChoice5 = parsedCurrentTaskInstructions[5];
                controller.questionFrequency = parsedCurrentTaskInstructions[6];
                
                controller.task = ["personalChl", null];
                controller.taskCompleted = false;
	            controller.taskRecorded = false;

                controller.modeChoice4 = currentTaskDuration[0];
                controller.setTaskDuration = currentTaskDuration[1];
            }
        }
    }

    localStorage.setItem('controller', JSON.stringify(controller))

    startQuestions();
}

function checkWrap() {
  const middleDivEl = document.querySelector('.middle-div');
  const containerInnerEl = document.querySelector('.container-inner');
  const practiceHolderDiv = document.querySelector(".practice-outer-div");
  const messageBoardPersonalChlHolderDiv = document.querySelector(".message-board-personal-chl-container");

  if (!middleDivEl || !containerInnerEl || !practiceHolderDiv || !messageBoardPersonalChlHolderDiv) return;

  // Defer measurement until after layout settles
  requestAnimationFrame(() => {
    // Remove wrapped first to re-measure cleanly
    middleDivEl.classList.remove('wrapped');
    containerInnerEl.classList.remove('wrapped');

    // Recalculate after class removal
    const wrapped = messageBoardPersonalChlHolderDiv.offsetTop > practiceHolderDiv.offsetTop;

    // Toggle classes accordingly
    middleDivEl.classList.toggle('wrapped', wrapped);
    containerInnerEl.classList.toggle('wrapped', wrapped);

    // Handle height adjustment
    if (wrapped) {
      setTimeout(setProperHeight, 50);
    } else {
      practiceHolderDiv.style.height = "100%";
    }
  });
}

function setProperHeight() {
  const middleDiv = document.querySelector('.middle-div');
  const outer = document.querySelector('.practice-outer-div');
  
  if (!middleDiv || !outer) return;

  // Only run if wrapped
  if (!middleDiv.classList.contains('wrapped')) return;

  // Reset height to auto first
  outer.style.height = 'auto';

  // Force reflow
  outer.offsetHeight;

  // Use requestAnimationFrame for accurate measurement
  requestAnimationFrame(() => {
    const container = document.getElementById('new-task-options-container-inner');
    if (!container) return;

    const fullHeight = container.scrollHeight;
    const practiceLabel = outer.querySelector('.practice-label-div');
    const submitButton = outer.querySelector('.submit-button-div');
    
    // Calculate total needed height
    const labelHeight = practiceLabel ? practiceLabel.offsetHeight : 0;
    const buttonHeight = submitButton ? submitButton.offsetHeight : 0;
    const padding = 40; // padding from .practice-outer-div
    
    const totalHeight = fullHeight + labelHeight + buttonHeight + padding;
    
    outer.style.height = totalHeight + 20 + 'px';
    
    // Update overflow class after height is set
    setTimeout(updateOverflowClass, 50);
  });
}

window.addEventListener('resize', checkWrap);

function updateOverflowClass() {
  const container = document.getElementById('new-task-options-container-inner');
  const practiceDiv = document.querySelector('.practice-outer-div');
  if (!container || !practiceDiv) return;

  // Compare scrollHeight to offsetHeight (visible height)
  const isOverflowing = container.scrollHeight > container.offsetHeight;
  practiceDiv.classList.toggle('overflowing', isOverflowing);
}

// Run on load, resize, and DOM changes
window.addEventListener('load', updateOverflowClass);
window.addEventListener('resize', updateOverflowClass);

// Optional: detect dynamic content changes
const observer = new MutationObserver(updateOverflowClass);
observer.observe(document.getElementById('new-task-options-container-inner'), { childList: true, subtree: true });


window.addEventListener('resize', checkWrap);
window.addEventListener('load', checkWrap);

async function handleKnowledgeLvlStatus () {
    const knowledgeLvlStatus = getClassLocalStorage();

    if (!userData) {
        if ((knowledgeLvlStatus !== null && knowledgeLvlStatus !== undefined  && knowledgeLvlStatus !== -1)) {
            await displayPersonalChl();
        } else {
            showClassPopup();
        }
    } else {
        if (userData.knowledgeLvl != null && userData.knowledgeLvl !== -1) {
            if (userData.accType !== "teacher" && userData.accType !== "admin") {
                await displayPersonalChl();
            }
        } else {
            console.log(userData.accType)
            if (userData.accType !== "teacher" && userData.accType !== "admin") {
                showClassPopupLoggedInClassConfirmation();
            }
        }
    }
}

handleKnowledgeLvlStatus();

window.addEventListener("pageshow", function () {
    const nav = performance.getEntriesByType("navigation")[0];

    if (nav && nav.type === "back_forward") {
        window.location.reload();
    }
});

// LOCAL STORAGE LIMIT START

const LOCALSTORAGE_LIMIT = 5 * 1024 * 1024;

let totalBytes = 0;
for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    const value = localStorage.getItem(key);
    totalBytes += key.length + value.length; // characters
}
totalBytes *= 2;

const percentUsed = (totalBytes / LOCALSTORAGE_LIMIT) * 100;

console.log(`LocalStorage used: ${percentUsed.toFixed(2)}% of 5 MB`);

// LOCAL STORAGE LIMIT END

	</script>
</body>

</html>
